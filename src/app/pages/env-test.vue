<template>
  <div class="env-test-page">
    <h1>ç¯å¢ƒå˜é‡æµ‹è¯•é¡µé¢</h1>
    <div class="env-info">
      <h2>VITE_HUAWEI_DOMAIN æµ‹è¯•</h2>
      <p><strong>ç¯å¢ƒå˜é‡å€¼:</strong> {{ huaweiDomain }}</p>
      <p><strong>æµ‹è¯•URL:</strong> {{ testImageUrl }}</p>
      <div class="image-test">
        <h3>å›¾ç‰‡æµ‹è¯•:</h3>
        <img :src="testImageUrl" alt="æµ‹è¯•å›¾ç‰‡" style="max-width: 200px; border: 1px solid #ccc;" @error="onImageError" @load="onImageLoad" />
        <p><strong>åŠ è½½çŠ¶æ€:</strong> {{ imageStatus }}</p>
      </div>
    </div>
  </div>
</template>

<script setup>
import { ref, computed } from 'vue'

// è·å–ç¯å¢ƒå˜é‡
const huaweiDomain = import.meta.env.VITE_HUAWEI_DOMAIN || 'æœªè®¾ç½®'

// æµ‹è¯•å›¾ç‰‡URL
const testImageUrl = computed(() => {
  const domain = import.meta.env.VITE_HUAWEI_DOMAIN || 'http://img.cykycyky.top'
  return `${domain}/general/test.jpg`
})

// å›¾ç‰‡åŠ è½½çŠ¶æ€
const imageStatus = ref('åŠ è½½ä¸­...')

const onImageLoad = () => {
  imageStatus.value = 'âœ… åŠ è½½æˆåŠŸ'
}

const onImageError = () => {
  imageStatus.value = 'âŒ åŠ è½½å¤±è´¥'
}

// åœ¨æ§åˆ¶å°è¾“å‡ºè°ƒè¯•ä¿¡æ¯
console.log('ğŸ” ç¯å¢ƒå˜é‡è°ƒè¯•ä¿¡æ¯:')
console.log('VITE_HUAWEI_DOMAIN:', import.meta.env.VITE_HUAWEI_DOMAIN)
console.log('æµ‹è¯•å›¾ç‰‡URL:', testImageUrl.value)
console.log('æ‰€æœ‰ç¯å¢ƒå˜é‡:', import.meta.env)
</script>

<style scoped>
.env-test-page {
  padding: 20px;
  max-width: 800px;
  margin: 0 auto;
}

.env-info {
  background: #f5f5f5;
  padding: 20px;
  border-radius: 8px;
  margin-top: 20px;
}

.image-test {
  margin-top: 20px;
  padding: 15px;
  background: white;
  border-radius: 5px;
}

h1, h2, h3 {
  color: #333;
}

p {
  margin: 10px 0;
}

strong {
  color: #666;
}
</style>